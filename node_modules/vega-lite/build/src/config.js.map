{"version":3,"file":"config.js","sourceRoot":"","sources":["../../src/config.ts"],"names":[],"mappings":"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","sourcesContent":["import {scheme} from 'vega-scale';\nimport {Color, InitSignal, NewSignal, RangeConfig, RangeScheme} from 'vega-typings';\nimport {isObject, mergeConfig} from 'vega-util';\nimport {Axis, AxisConfigMixins, isConditionalAxisValue} from './axis';\nimport {CompositeMarkConfigMixins, getAllCompositeMarks} from './compositemark';\nimport {VL_ONLY_LEGEND_CONFIG} from './guide';\nimport {HeaderConfigMixins} from './header';\nimport {defaultLegendConfig, LegendConfig} from './legend';\nimport * as mark from './mark';\nimport {\n  Mark,\n  MarkConfig,\n  MarkConfigMixins,\n  PRIMITIVE_MARKS,\n  VL_ONLY_MARK_CONFIG_PROPERTIES,\n  VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX\n} from './mark';\nimport {ProjectionConfig} from './projection';\nimport {defaultScaleConfig, ScaleConfig} from './scale';\nimport {defaultConfig as defaultSelectionConfig, SelectionConfig} from './selection';\nimport {BaseViewBackground, CompositionConfigMixins, DEFAULT_SPACING, isStep} from './spec/base';\nimport {TopLevelProperties} from './spec/toplevel';\nimport {extractTitleConfig, TitleConfig} from './title';\nimport {duplicate, getFirstDefined, keys} from './util';\n\nexport interface ViewConfig extends BaseViewBackground {\n  /**\n   * Default width\n   *\n   * __Deprecated:__ Since Vega-Lite 4.0. Please use continuousWidth and discreteWidth instead.\n   */\n  width?: number;\n\n  /**\n   * Default height\n   *\n   * __Deprecated:__ Since Vega-Lite 4.0. Please use continuousHeight and discreteHeight instead.\n   */\n  height?: number;\n\n  /**\n   * The default width when the plot has a continuous x-field.\n   *\n   * __Default value:__ `200`\n   */\n  continuousWidth?: number;\n\n  /**\n   * The default width when the plot has either a discrete x-field or no x-field.\n   * The width can be either a number indicating a fixed width or an object in the form of `{step: number}` defining the width per discrete step.\n   *\n   * __Default value:__ a step size based on `config.view.step`.\n   */\n  discreteWidth?: number | {step: number};\n  /**\n   * The default height when the plot has a continuous y-field.\n   *\n   * __Default value:__ `200`\n   */\n  continuousHeight?: number;\n\n  /**\n   * The default height when the plot has either a discrete y-field or no y-field.\n   * The height can be either a number indicating a fixed height or an object in the form of `{step: number}` defining the height per discrete step.\n   *\n   * __Default value:__ a step size based on `config.view.step`.\n   */\n  discreteHeight?: number | {step: number};\n\n  /**\n   * Default step size for x-/y- discrete fields.\n   */\n  step?: number;\n\n  /**\n   * Whether the view should be clipped.\n   */\n  clip?: boolean;\n}\n\nexport function getViewConfigContinuousSize(viewConfig: ViewConfig, channel: 'width' | 'height') {\n  return viewConfig[channel] ?? viewConfig[channel === 'width' ? 'continuousWidth' : 'continuousHeight']; // get width/height for backwards compatibility\n}\n\nexport function getViewConfigDiscreteStep(viewConfig: ViewConfig, channel: 'width' | 'height') {\n  const size = getViewConfigDiscreteSize(viewConfig, channel);\n  return isStep(size) ? size.step : DEFAULT_STEP;\n}\n\nexport function getViewConfigDiscreteSize(viewConfig: ViewConfig, channel: 'width' | 'height') {\n  const size = viewConfig[channel] ?? viewConfig[channel === 'width' ? 'discreteWidth' : 'discreteHeight']; // get width/height for backwards compatibility\n  return getFirstDefined(size, {step: viewConfig.step});\n}\n\nexport const DEFAULT_STEP = 20;\n\nexport const defaultViewConfig: ViewConfig = {\n  continuousWidth: 200,\n  continuousHeight: 200,\n  step: DEFAULT_STEP\n};\n\nexport function isVgScheme(rangeScheme: string[] | RangeScheme): rangeScheme is RangeScheme {\n  return rangeScheme && !!rangeScheme['scheme'];\n}\n\nexport type ColorConfig = {[name: string]: Color};\n\nexport type FontSizeConfig = {[name: string]: number};\n\nexport interface VLOnlyConfig {\n  /**\n   * Default font for all text marks, titles, and labels.\n   */\n  font?: string;\n\n  /**\n   * Default color signals.\n   *\n   * @hidden\n   */\n  color?: boolean | ColorConfig;\n\n  /**\n   * Default font size signals.\n   *\n   * @hidden\n   */\n  fontSize?: boolean | FontSizeConfig;\n\n  /**\n   * Default axis and legend title for count fields.\n   *\n   * __Default value:__ `'Count of Records`.\n   *\n   * @type {string}\n   */\n  countTitle?: string;\n\n  /**\n   * Defines how Vega-Lite generates title for fields. There are three possible styles:\n   * - `\"verbal\"` (Default) - displays function in a verbal style (e.g., \"Sum of field\", \"Year-month of date\", \"field (binned)\").\n   * - `\"function\"` - displays function using parentheses and capitalized texts (e.g., \"SUM(field)\", \"YEARMONTH(date)\", \"BIN(field)\").\n   * - `\"plain\"` - displays only the field name without functions (e.g., \"field\", \"date\", \"field\").\n   */\n  fieldTitle?: 'verbal' | 'functional' | 'plain';\n\n  /**\n   * D3 Number format for guide labels and text marks. For example \"s\" for SI units. Use [D3's number format pattern](https://github.com/d3/d3-format#locale_format).\n   */\n  numberFormat?: string;\n\n  /**\n   * Default time format for raw time values (without time units) in text marks, legend labels and header labels.\n   *\n   * __Default value:__ `\"%b %d, %Y\"`\n   * __Note:__ Axes automatically determine format each label automatically so this config would not affect axes.\n   */\n  timeFormat?: string;\n\n  /** Default properties for [single view plots](https://vega.github.io/vega-lite/docs/spec.html#single). */\n  view?: ViewConfig;\n\n  /**\n   * Scale configuration determines default properties for all [scales](https://vega.github.io/vega-lite/docs/scale.html). For a full list of scale configuration options, please see the [corresponding section of the scale documentation](https://vega.github.io/vega-lite/docs/scale.html#config).\n   */\n  scale?: ScaleConfig;\n\n  /** An object hash for defining default properties for each type of selections. */\n  selection?: SelectionConfig;\n}\n\nexport type StyleConfigIndex = Partial<Record<string, MarkConfig | Axis>> &\n  Partial<Record<Mark, MarkConfig>> & {\n    /**\n     * Default style for axis, legend, and header titles.\n     */\n    'guide-title'?: MarkConfig;\n\n    /**\n     * Default style for axis, legend, and header labels.\n     */\n    'guide-label'?: MarkConfig;\n\n    /**\n     * Default style for chart titles\n     */\n    'group-title'?: MarkConfig;\n\n    /**\n     * Default style for chart subtitles\n     */\n    'group-subtitle'?: MarkConfig;\n  };\n\nexport interface Config\n  extends TopLevelProperties,\n    VLOnlyConfig,\n    MarkConfigMixins,\n    CompositeMarkConfigMixins,\n    AxisConfigMixins,\n    HeaderConfigMixins,\n    CompositionConfigMixins {\n  /**\n   * CSS color property to use as the background of the entire view.\n   *\n   * __Default value:__ `\"white\"`\n   */\n  background?: Color;\n\n  /**\n   * An object hash that defines default range arrays or schemes for using with scales.\n   * For a full list of scale range configuration options, please see the [corresponding section of the scale documentation](https://vega.github.io/vega-lite/docs/scale.html#config).\n   */\n  range?: RangeConfig;\n\n  /**\n   * Legend configuration, which determines default properties for all [legends](https://vega.github.io/vega-lite/docs/legend.html). For a full list of legend configuration options, please see the [corresponding section of in the legend documentation](https://vega.github.io/vega-lite/docs/legend.html#config).\n   */\n  legend?: LegendConfig;\n\n  /**\n   * Title configuration, which determines default properties for all [titles](https://vega.github.io/vega-lite/docs/title.html). For a full list of title configuration options, please see the [corresponding section of the title documentation](https://vega.github.io/vega-lite/docs/title.html#config).\n   */\n  title?: TitleConfig;\n\n  /**\n   * Projection configuration, which determines default properties for all [projections](https://vega.github.io/vega-lite/docs/projection.html). For a full list of projection configuration options, please see the [corresponding section of the projection documentation](https://vega.github.io/vega-lite/docs/projection.html#config).\n   */\n  projection?: ProjectionConfig;\n\n  /** An object hash that defines key-value mappings to determine default properties for marks with a given [style](https://vega.github.io/vega-lite/docs/mark.html#mark-def). The keys represent styles names; the values have to be valid [mark configuration objects](https://vega.github.io/vega-lite/docs/mark.html#config). */\n  style?: StyleConfigIndex;\n\n  /**\n   * @hidden\n   */\n  signals?: (InitSignal | NewSignal)[];\n}\n\nexport const defaultConfig: Config = {\n  background: 'white',\n\n  padding: 5,\n  timeFormat: '%b %d, %Y',\n  countTitle: 'Count of Records',\n\n  view: defaultViewConfig,\n\n  mark: mark.defaultMarkConfig,\n  area: {},\n  bar: mark.defaultBarConfig,\n  circle: {},\n  geoshape: {},\n  image: {},\n  line: {},\n  point: {},\n  rect: mark.defaultRectConfig,\n  rule: {color: 'black'}, // Need this to override default color in mark config\n  square: {},\n  text: {color: 'black'}, // Need this to override default color in mark config\n  tick: mark.defaultTickConfig,\n  trail: {},\n\n  boxplot: {\n    size: 14,\n    extent: 1.5,\n    box: {},\n    median: {color: 'white'},\n    outliers: {},\n    rule: {},\n    ticks: null\n  },\n\n  errorbar: {\n    center: 'mean',\n    rule: true,\n    ticks: false\n  },\n\n  errorband: {\n    band: {\n      opacity: 0.3\n    },\n    borders: false\n  },\n\n  scale: defaultScaleConfig,\n\n  projection: {},\n\n  axis: {},\n  axisX: {},\n  axisY: {},\n  axisLeft: {},\n  axisRight: {},\n  axisTop: {},\n  axisBottom: {},\n  axisBand: {},\n  legend: defaultLegendConfig,\n  header: {titlePadding: 10, labelPadding: 10},\n  headerColumn: {},\n  headerRow: {},\n  headerFacet: {},\n\n  selection: defaultSelectionConfig,\n  style: {},\n\n  title: {},\n\n  facet: {spacing: DEFAULT_SPACING},\n  repeat: {spacing: DEFAULT_SPACING},\n  concat: {spacing: DEFAULT_SPACING}\n};\n\nconst tab10 = scheme('tableau10');\n\nexport const DEFAULT_FONT_SIZE = {\n  text: 11,\n  guideLabel: 10,\n  guideTitle: 11,\n  groupTitle: 13,\n  groupSubtitle: 12\n};\n\nexport const DEFAULT_COLOR = {\n  blue: tab10[0],\n  orange: tab10[1],\n  red: tab10[2],\n  teal: tab10[3],\n  green: tab10[4],\n  yellow: tab10[5],\n  purple: tab10[6],\n  pink: tab10[7],\n  brown: tab10[8],\n  gray0: '#000',\n  gray1: '#111',\n  gray2: '#222',\n  gray3: '#333',\n  gray4: '#444',\n  gray5: '#555',\n  gray6: '#666',\n  gray7: '#777',\n  gray8: '#888',\n  gray9: '#999',\n  gray10: '#aaa',\n  gray11: '#bbb',\n  gray12: '#ccc',\n  gray13: '#ddd',\n  gray14: '#eee',\n  gray15: '#fff'\n};\n\nexport function colorSignalConfig(color: boolean | ColorConfig = {}): Config {\n  return {\n    signals: [\n      {\n        name: 'color',\n        value: isObject(color) ? {...DEFAULT_COLOR, ...color} : DEFAULT_COLOR\n      }\n    ],\n    mark: {color: {signal: 'color.blue'}},\n    rule: {color: {signal: 'color.gray0'}},\n    text: {\n      color: {signal: 'color.gray0'}\n    },\n    style: {\n      'guide-label': {\n        fill: {signal: 'color.gray0'}\n      },\n      'guide-title': {\n        fill: {signal: 'color.gray0'}\n      },\n      'group-title': {\n        fill: {signal: 'color.gray0'}\n      },\n      'group-subtitle': {\n        fill: {signal: 'color.gray0'}\n      },\n      cell: {\n        stroke: {signal: 'color.gray8'}\n      }\n    },\n    axis: {\n      domainColor: {signal: 'color.gray13'},\n      gridColor: {signal: 'color.gray8'},\n      tickColor: {signal: 'color.gray13'}\n    },\n    range: {\n      category: [\n        {signal: 'color.blue'},\n        {signal: 'color.orange'},\n        {signal: 'color.red'},\n        {signal: 'color.teal'},\n        {signal: 'color.green'},\n        {signal: 'color.yellow'},\n        {signal: 'color.purple'},\n        {signal: 'color.pink'},\n        {signal: 'color.brown'},\n        {signal: 'color.grey8'}\n      ]\n    }\n  };\n}\n\nexport function fontSizeSignalConfig(fontSize: boolean | FontSizeConfig): Config {\n  return {\n    signals: [\n      {\n        name: 'fontSize',\n        value: isObject(fontSize) ? {...DEFAULT_FONT_SIZE, ...fontSize} : DEFAULT_FONT_SIZE\n      }\n    ],\n    text: {\n      fontSize: {signal: 'fontSize.text'}\n    },\n    style: {\n      'guide-label': {\n        fontSize: {signal: 'fontSize.guideLabel'}\n      },\n      'guide-title': {\n        fontSize: {signal: 'fontSize.guideTitle'}\n      },\n      'group-title': {\n        fontSize: {signal: 'fontSize.groupTitle'}\n      },\n      'group-subtitle': {\n        fontSize: {signal: 'fontSize.groupSubtitle'}\n      }\n    }\n  };\n}\n\nexport function fontConfig(font: string): Config {\n  return {\n    text: {font},\n    style: {\n      'guide-label': {font},\n      'guide-title': {font},\n      'group-title': {font},\n      'group-subtitle': {font}\n    }\n  };\n}\n\nexport function initConfig(config: Config = {}) {\n  const {color, font, fontSize, ...restConfig} = config;\n\n  return mergeConfig(\n    {},\n    defaultConfig,\n    font ? fontConfig(font) : {},\n    color ? colorSignalConfig(color) : {},\n    fontSize ? fontSizeSignalConfig(fontSize) : {},\n    restConfig || {}\n  );\n}\n\nconst MARK_STYLES = ['view', ...PRIMITIVE_MARKS] as ('view' | Mark)[];\n\nconst VL_ONLY_CONFIG_PROPERTIES: (keyof Config)[] = [\n  'color',\n  'fontSize',\n  'background', // We apply background to the spec directly.\n  'padding',\n  'facet',\n  'concat',\n  'repeat',\n  'numberFormat',\n  'timeFormat',\n  'countTitle',\n  'header',\n  'axisQuantitative',\n  'axisTemporal',\n  'scale',\n  'selection',\n  'overlay' as keyof Config // FIXME: Redesign and unhide this\n];\n\nconst VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX = {\n  view: ['continuousWidth', 'continuousHeight', 'discreteWidth', 'discreteHeight', 'step'],\n  ...VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX\n};\n\nexport function stripAndRedirectConfig(config: Config) {\n  config = duplicate(config);\n\n  for (const prop of VL_ONLY_CONFIG_PROPERTIES) {\n    delete config[prop];\n  }\n\n  if (config.axis) {\n    // delete condition axis config\n    for (const prop in config.axis) {\n      if (isConditionalAxisValue(config.axis[prop])) {\n        delete config.axis[prop];\n      }\n    }\n  }\n\n  if (config.legend) {\n    for (const prop of VL_ONLY_LEGEND_CONFIG) {\n      delete config.legend[prop];\n    }\n  }\n\n  // Remove Vega-Lite only generic mark config\n  if (config.mark) {\n    for (const prop of VL_ONLY_MARK_CONFIG_PROPERTIES) {\n      delete config.mark[prop];\n    }\n  }\n\n  for (const markType of MARK_STYLES) {\n    // Remove Vega-Lite-only mark config\n    for (const prop of VL_ONLY_MARK_CONFIG_PROPERTIES) {\n      delete config[markType][prop];\n    }\n\n    // Remove Vega-Lite only mark-specific config\n    const vlOnlyMarkSpecificConfigs = VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX[markType];\n    if (vlOnlyMarkSpecificConfigs) {\n      for (const prop of vlOnlyMarkSpecificConfigs) {\n        delete config[markType][prop];\n      }\n    }\n\n    // Redirect mark config to config.style so that mark config only affect its own mark type\n    // without affecting other marks that share the same underlying Vega marks.\n    // For example, config.rect should not affect bar marks.\n    redirectConfigToStyleConfig(config, markType);\n  }\n\n  for (const m of getAllCompositeMarks()) {\n    // Clean up the composite mark config as we don't need them in the output specs anymore\n    delete config[m];\n  }\n\n  redirectTitleConfig(config);\n\n  // Remove empty config objects.\n  for (const prop in config) {\n    if (isObject(config[prop]) && keys(config[prop]).length === 0) {\n      delete config[prop];\n    }\n  }\n\n  return keys(config).length > 0 ? config : undefined;\n}\n\n/**\n *\n * Redirect config.title -- so that title config do not affect header labels,\n * which also uses `title` directive to implement.\n *\n * For subtitle configs in config.title, keep them in config.title as header titles never have subtitles.\n */\nfunction redirectTitleConfig(config: Config) {\n  const {mark: m, subtitle} = extractTitleConfig(config.title);\n\n  const style: MarkConfig = {\n    ...m,\n    ...config.style['group-title']\n  };\n\n  // set config.style if it is not an empty object\n  if (keys(style).length > 0) {\n    config.style['group-title'] = style;\n  }\n\n  //\n  if (keys(subtitle).length > 0) {\n    config.title = subtitle;\n  } else {\n    delete config.title;\n  }\n}\n\nfunction redirectConfigToStyleConfig(\n  config: Config,\n  prop: Mark | 'view' | string, // string = composite mark\n  toProp?: string,\n  compositeMarkPart?: string\n) {\n  const propConfig: MarkConfig = compositeMarkPart ? config[prop][compositeMarkPart] : config[prop];\n\n  if (prop === 'view') {\n    toProp = 'cell'; // View's default style is \"cell\"\n  }\n\n  const style: MarkConfig = {\n    ...propConfig,\n    ...(config.style[toProp ?? prop] as MarkConfig)\n  };\n\n  // set config.style if it is not an empty object\n  if (keys(style).length > 0) {\n    config.style[toProp ?? prop] = style;\n  }\n\n  if (!compositeMarkPart) {\n    // For composite mark, so don't delete the whole config yet as we have to do multiple redirections.\n    delete config[prop];\n  }\n}\n"]}